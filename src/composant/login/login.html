<!-- üåü CONTAINER CONNEXION -->
<div class="connexion-container fixed inset-0 w-full h-full flex flex-col justify-center items-center overflow-hidden 
            bg-gradient-to-br from-[var(--Black)] via-[var(--Gris)] to-[var(--Black)] 
            dark:from-[var(--Noir)] dark:via-[var(--Gris)] dark:to-[var(--Noir)] 
            transition-colors duration-700">

  <!-- üß© Ic√¥ne / Logo -->
  <app-icon class="mb-6 animate-fade-in z-20"></app-icon>

  <!-- üåÑ Image de fond -->
  <div class="absolute inset-0 overflow-hidden">
    <div class="absolute inset-0 bg-cover bg-center scale-105 blur-[1px] brightness-[0.4]"
         style="background-image: url('assets/bg1.jpg');"></div>
    <div class="absolute inset-0 bg-gradient-to-br from-black/80 via-[var(--Black)]/60 to-[var(--Rouge)]/20 backdrop-blur-sm"></div>
  </div>

  <!-- üß© Conteneur principal -->
  <div class="relative z-10 w-full max-w-md sm:max-w-lg px-4 sm:px-6 animate-fade-in-up">

    <!-- üß† Formulaire -->
    <form (ngSubmit)="valider()" #connexionForm="ngForm"
          class="bg-white/10 backdrop-blur-2xl rounded-3xl p-6 sm:p-8 shadow-2xl 
                 border border-[var(--Vert-Clair)] space-y-6">

      <!-- Header -->
      <div class="text-center">
        <div class="w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-[var(--Vert)] to-[var(--Bleu)] rounded-2xl flex items-center justify-center shadow-lg">
          <i class="fas fa-user-lock text-3xl text-white"></i>
        </div>
        <h2 class="text-4xl font-extrabold text-white">Connexion</h2>
        <p class="text-white/80 mt-2">Acc√©dez √† votre espace personnel</p>
      </div>

      <!-- ‚úâÔ∏è EMAIL -->
      <div>
        <label class="block text-sm font-semibold text-white mb-1">
          <i class="fas fa-envelope mr-2 text-[var(--vivid-pink)]"></i>Email
        </label>

        <input
          type="email"
          name="email"
          required
          [(ngModel)]="connexionData.email"
          #email="ngModel"
          placeholder="Votre e-mail"

          class="w-full px-4 py-3 rounded-xl bg-white/10 text-white placeholder-white/60
                 border transition-all duration-300 focus:ring-4 focus:scale-[1.02]"

          [ngClass]="{
            'border-[var(--Vert)] focus:ring-[var(--Vert)]/30': email.valid && email.touched,
            'border-[var(--Rouge)] focus:ring-[var(--Rouge)]/30': email.invalid && email.touched,
            'border-white/20': !email.touched
          }"
        />

        <p *ngIf="email.invalid && email.touched"
           class="text-[var(--Rouge)] text-xs mt-1 animate-fade-in">
          Adresse e-mail invalide
        </p>
      </div>

      <!-- üîí MOT DE PASSE -->
      <div>
        <label class="block text-sm font-semibold text-white mb-1">
          <i class="fas fa-lock mr-2 text-[var(--vivid-pink)]"></i>Mot de passe
        </label>

        <div class="relative">
          <input
            [type]="passwordVisible ? 'text' : 'password'"
            name="password"
            required
            minlength="6"
            [(ngModel)]="connexionData.password"
            #password="ngModel"
            placeholder="Votre mot de passe"

            class="w-full px-4 py-3 pr-10 rounded-xl bg-white/10 text-white placeholder-white/60
                   border transition-all duration-300 focus:ring-4 focus:scale-[1.02]"

            [ngClass]="{
              'border-[var(--Vert)] focus:ring-[var(--Vert)]/30': password.valid && password.touched,
              'border-[var(--Rouge)] focus:ring-[var(--Rouge)]/30': password.invalid && password.touched,
              'border-white/20': !password.touched
            }"
          />

          <button type="button"
                  (click)="togglePasswordVisibility()"
                  class="absolute right-3 top-1/2 -translate-y-1/2 text-white/60 hover:text-[var(--Vert)]">
            <i class="fas" [ngClass]="passwordVisible ? 'fa-eye-slash' : 'fa-eye'"></i>
          </button>
        </div>

        <p *ngIf="password.invalid && password.touched"
           class="text-[var(--Rouge)] text-xs mt-1 animate-fade-in">
          Minimum 6 caract√®res requis
        </p>
      </div>

      <!-- ‚ö†Ô∏è Erreur serveur -->
      <div *ngIf="errorMessage"
           class="bg-[var(--Rouge)]/25 border border-[var(--Rouge)] rounded-xl p-3 text-[var(--Rouge)] text-sm flex items-center">
        <i class="fas fa-exclamation-circle mr-2"></i>{{ errorMessage }}
      </div>

      <!-- üöÄ Bouton -->
      <button type="submit"
              [disabled]="connexionForm.invalid || isLoading"
              class="w-full py-3 rounded-xl font-bold text-white
                     bg-gradient-to-r from-[var(--Vert)] to-[var(--Bleu)]
                     disabled:opacity-50 transition-all">
        <span *ngIf="!isLoading">Se connecter</span>
        <span *ngIf="isLoading"><i class="fas fa-spinner fa-spin mr-2"></i>Connexion...</span>
      </button>

      <!-- üßæ Inscription -->
      <div class="text-center border-t border-[var(--Vert)] pt-5">
        <p class="text-white/80 text-sm">
          Pas encore de compte ?
          <a routerLink="/inscription"
             class="ml-2 px-4 py-2 bg-[var(--Bleu-Fonc√©)] rounded-lg hover:bg-[var(--Vert-Fonc√©)] transition">
            Cr√©er un compte
          </a>
        </p>
      </div>

    </form>
  </div>
</div>

<app-icon></app-icon>

<section class="w-full py-20 font-sans"
         [ngStyle]="{'background': background, 'color': text, 'font-family': 'Inclusive Sans, sans-serif'}">

  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center">

    <!-- Titre principal -->
    <div class="mb-16">
      <h1 class="text-4xl md:text-6xl font-bold mb-6"
          [ngStyle]="{
            'color':text
          }">
        Découvrez UniDys
      </h1>
      <p [ngStyle]="{'color': text}" class="text-xl max-w-2xl mx-auto">
        Une plateforme conçue pour accompagner chaque utilisateur dans son parcours d'apprentissage
      </p>
    </div>

    <!-- Cartes des rôles -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16 max-w-5xl mx-auto">

      <!-- Carte Élève -->
      <div class="group relative rounded-2xl shadow-lg transition-all duration-500 hover:-translate-y-2 overflow-hidden"
           [ngStyle]="{'background': background2}">
        <div class="absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity duration-300"
             [ngStyle]="{'background': 'linear-gradient(to bottom right,' + Orangeclair + ',' + Or + ')'}"></div>
        <div class="p-8 relative z-10">
          <div class="w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center transform group-hover:scale-110 transition-transform duration-300"
               [ngStyle]="{'background': 'linear-gradient(to bottom right,' + Orangeclair + ',' + Or + ')'}">
            <i class="fa-solid fa-book-open text-white text-2xl"></i>
          </div>
          <h3 [ngStyle]="{'color': titre}" class="text-2xl font-bold mb-4">Élève</h3>
          <p [ngStyle]="{'color': texte}" class="mb-6">Apprenez à votre rythme avec des outils adaptés à vos besoins</p>
          <button (click)="openPopup('eleve')"
                  class="w-full px-8 py-3 font-semibold rounded-full transform hover:scale-105 transition-all duration-300 shadow-lg"
                  [ngStyle]="{
                    'background': 'linear-gradient(to right,' + Orangeclair + ',' + Or + ')',
                    'color': text
                  }">
            Commencer
          </button>
        </div>
      </div>

      <!-- Carte Professeur -->
      <div class="group relative rounded-2xl shadow-lg transition-all duration-500 hover:-translate-y-2 overflow-hidden"
           [ngStyle]="{'background': background2}">
        <div class="absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity duration-300"
             [ngStyle]="{'background': 'linear-gradient(to bottom right,' + Bleuclair + ',' + Bleuclair + ')'}"></div>
        <div class="p-8 relative z-10">
          <div class="w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center transform group-hover:scale-110 transition-transform duration-300"
               [ngStyle]="{'background': 'linear-gradient(to bottom right,' + Bleuclair + ',' + Bleuclair + ')'}">
            <i class="fa-solid fa-chalkboard-teacher text-white text-2xl"></i>
          </div>
          <h3 [ngStyle]="{'color': titre}" class="text-2xl font-bold mb-4">Professeur</h3>
          <p [ngStyle]="{'color': texte}" class="mb-6">Accompagnez vos élèves avec des outils pédagogiques innovants</p>
          <button (click)="openPopup('prof')"
                  class="w-full px-8 py-3 font-semibold rounded-full transform hover:scale-105 transition-all duration-300 shadow-lg"
                  [ngStyle]="{
                    'background': 'linear-gradient(to right,' + Bleuclair + ',' + Bleuclair + ')',
                    'color': text
                  }">
            Explorer
          </button>
        </div>
      </div>

      <!-- Carte Parent -->
      <div class="group relative rounded-2xl shadow-lg transition-all duration-500 hover:-translate-y-2 overflow-hidden"
           [ngStyle]="{'background': background2}">
        <div class="absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity duration-300"
             [ngStyle]="{'background': 'linear-gradient(to bottom right,' + Maron + ',' + RougeFonce + ')'}"></div>
        <div class="p-8 relative z-10">
          <div class="w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center transform group-hover:scale-110 transition-transform duration-300"
               [ngStyle]="{'background': 'linear-gradient(to bottom right,' + Maron + ',' + RougeFonce + ')'}">
            <i class="fa-solid fa-user-check text-white text-2xl"></i>
          </div>
          <h3 [ngStyle]="{'color': titre}" class="text-2xl font-bold mb-4">Parent</h3>
          <p [ngStyle]="{'color': texte}" class="mb-6">Suivez le progrès de votre enfant et restez impliqué</p>
          <button (click)="openPopup('parent')"
                  class="w-full px-8 py-3 font-semibold rounded-full transform hover:scale-105 transition-all duration-300 shadow-lg"
                  [ngStyle]="{
                    'background': 'linear-gradient(to right,' + Maron + ',' + RougeFonce + ')',
                    'color': text
                  }">
            Découvrir
          </button>
        </div>
      </div>

    </div>
  </div>
</section>

<!-- POPUP MODALE -->
<div *ngIf="showPopup" class="fixed inset-0 z-50 flex items-center justify-center"
     [ngStyle]="{'background': 'rgba(0,0,0,0.6)', 'backdrop-filter': 'blur(4px)'}">

  <div class="rounded-3xl shadow-2xl w-full max-w-4xl h-[90vh] relative overflow-hidden transform transition-all duration-300"
       [ngStyle]="{'background': background, 'color': text}">

    <!-- Header -->
    <div class="p-8 border-b"
         [ngStyle]="{'background': header, 'border-color': RougeFonce}">
      <div class="flex items-center justify-between mb-4">
        <h2 [ngStyle]="{'color': titre}" class="text-3xl font-bold">{{ parcours[selectedRole!].titre }}</h2>
        <button (click)="closePopup()"
                class="w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 hover:rotate-90"
                [ngStyle]="{'background': Or, 'color': text}">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
      <div class="w-full rounded-full h-2"
           [ngStyle]="{'background': texte}">
        <div class="h-2 rounded-full transition-all duration-500"
             [ngStyle]="{
               'background': 'linear-gradient(to right,' + Bleuclair + ',' + Orangeclair + ')',
               'width.%': ((currentStep + 1) / parcours[selectedRole!].etapes.length) * 100
             }"></div>
      </div>
      <p [ngStyle]="{'color': texte}" class="text-sm mt-2">
        Étape {{ currentStep + 1 }} sur {{ parcours[selectedRole!].etapes.length }}
      </p>
    </div>

    <!-- Contenu principal -->
    <div class="p-8 h-[calc(90vh-200px)] overflow-y-auto">
      <div class="flex flex-col items-center text-center max-w-3xl mx-auto">

        <!-- Icône -->
        <div class="mb-8 relative flex flex-col items-center">
          <i [ngClass]="parcours[selectedRole!].etapes[currentStep].icone"
             class="text-6xl md:text-8xl transition-colors duration-300"
             [ngStyle]="{'color': Bleuclair, 'cursor': 'default'}"></i>
          <div class="absolute -bottom-4 left-1/2 transform -translate-x-1/2 w-20 h-1 rounded-full"
               [ngStyle]="{'background': 'linear-gradient(to right,' + Bleuclair + ',' + Orangeclair + ')'}"></div>
        </div>

        <!-- Titre étape -->
        <h3 [ngStyle]="{'color': titre}" class="text-2xl font-bold mb-4">
          {{ parcours[selectedRole!].etapes[currentStep].titre }}
        </h3>

        <!-- Texte -->
        <p [ngStyle]="{'color': texte}" class="text-xl leading-relaxed mb-8">
          {{ parcours[selectedRole!].etapes[currentStep].texte }}
        </p>

        <!-- Indicateurs d'étape -->
        <div class="flex space-x-3 mb-8">
          <div *ngFor="let step of parcours[selectedRole!].etapes; let i = index"
               class="w-3 h-3 rounded-full transition-all duration-300"
               [ngStyle]="{'background': i === currentStep ? Bleuclair : texte, 'transform': i === currentStep ? 'scale(1.25)' : 'scale(1)'}">
          </div>
        </div>

      </div>
    </div>

    <!-- Navigation -->
    <div class="absolute bottom-0 left-0 right-0 p-6"
         [ngStyle]="{'background': header, 'border-top': '1px solid ' + RougeFonce}">
      <div class="flex justify-between items-center max-w-3xl mx-auto">

        <button (click)="prevStep()" [disabled]="currentStep === 0"
                class="flex items-center px-6 py-3 font-semibold rounded-full transition-all duration-300"
                [ngStyle]="{
                  'background': Or,
                  'color': text,
                  'opacity': currentStep === 0 ? 0.5 : 1,
                  'cursor': currentStep === 0 ? 'not-allowed' : 'pointer'
                }">
          <i class="fa-solid fa-arrow-left mr-2"></i> Précédent
        </button>

        <button *ngIf="currentStep < parcours[selectedRole!].etapes.length - 1" (click)="nextStep()"
                class="flex items-center px-8 py-3 font-semibold rounded-full transform hover:scale-105 transition-all duration-300 shadow-lg"
                [ngStyle]="{'background': 'linear-gradient(to right,' + Bleuclair + ',' + Orangeclair + ')', 'color': text}">
          Suivant <i class="fa-solid fa-arrow-right ml-2"></i>
        </button>

        <button *ngIf="currentStep === parcours[selectedRole!].etapes.length - 1" (click)="closePopup()"
                class="flex items-center px-8 py-3 font-semibold rounded-full transform hover:scale-105 transition-all duration-300 shadow-lg"
                [ngStyle]="{'background': 'linear-gradient(to right,' + Or + ',' + Orangeclair + ')', 'color': text}">
          Terminer <i class="fa-solid fa-check ml-2"></i>
        </button>

      </div>
    </div>

  </div>
</div>
